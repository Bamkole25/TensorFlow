task downloadPredictModelFile(type: Download) {
    src 'https://storage.googleapis.com/download.tensorflow.org/models/tflite/arbitrary_style_transfer/style_predict_quantized_256.tflite'
    dest project.ext.ASSET_DIR + '/style_predict_quantized_256.tflite'
    overwrite false
}

// TODO: Add support for dynamic size model
//task downloadTransformModelDynamicFile(type: Download) {
//    src 'https://storage.googleapis.com/download.tensorflow.org/models/tflite/arbitrary_style_transfer/style_transfer_quantized_dynamic.tflite'
//    dest project.ext.ASSET_DIR + '/style_transfer_quantized_dynamic.tflite'
//    overwrite false
//}

task downloadTransformModelFile(type: Download) {
    src 'https://storage.googleapis.com/download.tensorflow.org/models/tflite/arbitrary_style_transfer/style_transfer_quantized_384.tflite'
    dest project.ext.ASSET_DIR + '/style_transfer_quantized_384.tflite'
    overwrite false
}

task downloadPredictGPUModelFile(type: Download) {
    src 'https://storage.googleapis.com/download.tensorflow.org/models/tflite/arbitrary_style_transfer/style_predict_f16_256.tflite'
    dest project.ext.ASSET_DIR + '/style_predict_f16_256.tflite'
    overwrite false
}

task downloadTransformGPUModelFile(type: Download) {
    src 'https://storage.googleapis.com/download.tensorflow.org/models/tflite/arbitrary_style_transfer/style_transfer_f16_384.tflite'
    dest project.ext.ASSET_DIR + '/style_transfer_f16_384.tflite'
    overwrite false
}

tasks.whenTaskAdded { task ->
    if ((task.name == 'assembleDebug') || (task.name == 'assembleRelease')) {
        task.dependsOn 'downloadPredictModelFile'
        task.dependsOn 'downloadTransformModelFile'
//        task.dependsOn 'downloadTransformModelDynamicFile'
        task.dependsOn 'downloadPredictGPUModelFile'
        task.dependsOn 'downloadTransformGPUModelFile'
    }
}


